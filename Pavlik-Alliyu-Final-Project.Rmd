---
title: "R Notebook"
output: html_notebook
---


```{r Front Matter, include=FALSE}
# Clean up environment
rm(list = ls())

# Load packages
library(tidyverse)
library(readr)

```

# Add Data Table One

```{r}
fed_data <- 
  read_csv("dif source join.csv")

 head(fed_data)

```

# Add Data Table Two

```{r}
NCANDS <- 
  read_csv("Findings from NCANDS - Data Tables (updated with FY 2015).csv")

head(NCANDS)

```



## Cleaning Federal Data


```{r}
# Make totals seperate table from fed_data
fed_totals <-
  fed_data %>%
  filter(`Measure 2` == "Total")

```

```{r}
# Clean fed_totals
fed_totals <- 
  fed_totals %>%
  rename(Measure_2 = 'Measure 2',  Measure_1 = 'Measure 1') %>%
  spread(key = Format, value = Value) 

```

```{r}
# Remove columns
fed_totals <- 
  fed_totals %>%
  select(-'X7', -'Measure_1', -'Measure_2')

```

```{r}
# Rename remaining variables
fed_totals <- 
  fed_totals %>%
  rename(Num_Fatalities = 'Number')

```

## Cleaning NCANDS Data

```{r}

NCANDS <-
  NCANDS %>%
  rename(Characteristic = `Characteristic Label`)

```


```{r}

fatality_sub_type <-
  NCANDS %>%
  filter(Table == "Child Fatalities by Submission Type") %>%
  spread(key = Measure, value = Value)


fatality_trend <-
  NCANDS %>%
  filter(Table == "Child Fatalities, Trend") %>%
  spread(key = Measure, value = Value)


victim_age <-
  NCANDS %>%
  filter(Table == "Child Victims by Age") %>%
  spread(key = Measure, value = Value)


case_type <-
  NCANDS %>%
  filter(Table == "Children by Disposition") %>%
  spread(key = Measure, value = Value)


investigation <-
  NCANDS %>%
  filter(Table == "Children Who Received an Investigation or Alternative Response, Trend") %>%
  spread(key = Measure, value = Value)


mal_type <-
  NCANDS %>%
  filter(Table == "Maltreatment Types of Victims") %>%
  spread(key = Measure, value = Value)


perpetrator_tally <-
  NCANDS %>%
  filter(Table == "Perpetrators by Relationship to their Victims") %>%
  spread(key = Measure, value = Value)


perpetrator_total <-
  NCANDS %>%
  filter(Table == "Perpetrators, Trend") %>%
  spread(key = Measure, value = Value)


referral_Type <-
  NCANDS %>%
  filter(Table == "Screened-In and Screened-Out Referrals") %>%
  spread(key = Measure, value = Value)

```
















Outline 

# Join

* Join tables from two different sources 


# Data Wrangling Portion

* General purpose data wrangling
    + Use when tidying data tables 
* Use of spread and gather 
* Use of regular expressions
* User-defined functions
* Loops and/or control flow 

# Data Visualization

* Visualization with layered data from distinct data structures
* Visualization displaying 3 or more variables
"* Another visualization
* Another visualization

# Data Analysis

* Statistical modeling/Supervised learning
* Unsupervised learning
* Analysis of text data 










































